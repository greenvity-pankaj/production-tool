C51 COMPILER V9.53.0.0   FM                                                                11/04/2015 20:09:39 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE FM
OBJECT MODULE PLACED IN .\obj\fm.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\..\..\components\utilities\debug\src\fm.c LARGE OBJECTADVANCED OPT
                    -IMIZE(9,SIZE) BROWSE INTVECTOR(0X2100) INCDIR(..\..\..\..\firmware\common\datapath;..\..\..\..\firmware\common\include;.
                    -.\..\..\..\firmware\hal;..\..\..\..\firmware\hpgp\src\crypto;..\..\..\..\firmware\hpgp\src\ctrl;..\..\..\..\firmware\hpg
                    -p\src\hal;..\..\..\..\firmware\hpgp\src\link;..\..\..\..\firmware\hpgp\src\mux;..\..\..\..\firmware\hpgp\src\nma;..\..\.
                    -.\..\firmware\hpgp\src\route;..\..\..\..\firmware\hpgp\src\test;..\..\..\..\firmware\project\hal\src;..\..\..\..\firmwar
                    -e\zigbee;..\..\..\..\components\aps\inc;..\..\..\..\components\utilities\datatype\inc;..\..\..\..\components\utilities\e
                    -vent\inc;..\..\..\..\components\utilities\linklist\inc;..\..\..\..\components\utilities\timer\inc;..\..\..\..\components
                    -\hpgp\inc;..\..\..\..\firmware\common;..\..\..\..\firmware\hpgp;..\..\..\..\firmware\hpgp\src;..\..\..\..\firmware\app_s
                    -upport;..\..\..\..\firmware\HybriiB_configuration_rw\src;..\..\..\..\components\drivers\gpio\inc;..\..\..\..\components\
                    -drivers\hpgp\inc;..\..\..\..\components\drivers\nwk\inc;..\..\..\..\components\drivers\ieee802154\inc;..\..\..\..\compon
                    -ents;..\..\..\..\components\osal\inc;..\..\..\..\components\nma\hpgp\inc;..\..\..\..\components\nma\ieee802154\inc;..\..
                    -\..\..\components\nma;..\..\..\..\components\utilities\event\inc;..\..\..\..\components\hpgp\inc;..\..\..\..\components\
                    -drivers\flash\inc;..\..\..\..\components\ieee802154\inc;..\..\..\..\components\drivers\uart\inc;..\..\..\..\components\u
                    -tilities;..\..\..\..\components\drivers\hpgp\inc;..\..\..\..\components\drivers\ieee802154\inc;..\..\..\..\components\dr
                    -ivers\nwk\inc;..\..\..\..\components\utilities\debug\inc;..\..\..\..\sampleapp\inc;..\..\..\..\sampleapp\src;..\..\inc;.
                    -.\..\..\..\components\drivers\i2c\inc;..\..\..\..\components\drivers\gvspi\inc) NOAREGS DEFINE(inline,P8051,C51,HPGP_HAL
                    -,HYBRII_8051,HYBRII_HPGP,CCO_FUNC,STA_FUNC,HPGP_TEST,HPGP_DEBUG,RTX51_TINY_OS,HYBRII_ASIC,PLC_SW_SYNC,HPGP_MAC_SAP,NMA,N
                    -EW_SYNC,UM,HYBRII_B,Hybrii_B,HW_SPI_TX_CRC,HW_SPI_RX_CRC,B_ASICPLC,HYBRII_ASIC_A2,BB_CAL,_CRC_VERIFY_,BB_GAIN_TABLE,B2,F
                    -REQ_DETECT,HYBRII_B_AFE,_BC_SECURE_TEST_,FREQ_DETECT,BCN_ERR,NO_HOST,MCCO,KEEP_ALIVE,UART_RAW,UART_HOST_INTF,UART_GPIO_I
                    -NTERRUPT,MCCO,SW_RECOVERY,HYBRII_802154,DEBUG_DATAPATH,HPGP_DRIVER_APP,LRWPAN_DRIVER_APP,NWKSTARTUP_APP,ROUTE_APP,RTOPO_
                    -APP,REGISTER_APP,LLP_APP,BRIDGE,DEVICEINTF_APP,SMARTLIGHT_APP,LED_SMART_LIGHT,ROUTE_RECOVERY) PRINT(.\lst\fm.lst) TABS(2
                    -) OBJECT(.\obj\fm.obj)

line level    source

   1          /* ========================================================
   2           *
   3           * @file: fm.c
   4           * 
   5           * @brief: This file provides fault managment logging mechanism
   6           *      
   7           *  Copyright (C) 2010-2015, Greenvity Communications, Inc.
   8           *  All Rights Reserved
   9           *  
  10           * =========================================================*/
  11          
  12          /****************************************************************************** 
  13            * Includes
  14            ******************************************************************************/
  15          
  16          #include <stdio.h>
  17          #include <stdarg.h>
  18          #include "fm.h"
  19          
  20          /****************************************************************************** 
  21            * Global Data
  22            ******************************************************************************/
  23          u32 FmDebug = FM_MASK_DEFAULT;
  24          
  25          /****************************************************************************** 
  26            * External Data
  27            ******************************************************************************/
  28            
  29          /******************************************************************************
  30            * External Funtion prototypes
  31            ******************************************************************************/
  32            
  33          /******************************************************************************
  34            * Funtion prototypes
C51 COMPILER V9.53.0.0   FM                                                                11/04/2015 20:09:39 PAGE 2   

  35            ******************************************************************************/
  36          
  37          /******************************************************************************
  38           * @fn      FM_SetDebugLevel
  39           *
  40           * @brief   Sets the debug level(look at fm.h for masks)
  41           *
  42           * @param   dbgLevel - debug mask
  43           *
  44           * @return  none
  45           */
  46          
  47          void FM_SetDebugLevel(u32 dbgMask)
  48          {
  49   1        FmDebug = dbgMask;
  50   1      }
  51          
  52          /******************************************************************************
  53           * @fn      FM_Printf
  54           *
  55           * @brief   Prints the logs on the console
  56           *
  57           * @param   dbgLevel - debug level(Module number, check fm.h for enums)
  58           *          fmt - debug string
  59           *
  60           * @return  none
  61           */
  62          
  63          void FM_Printf(u32 dbgLevel, char *fmt, ...)
  64          {
  65   1          va_list args;
  66   1        
  67   1          IRQ_DISABLE_INTERRUPT();
  68   1          va_start(args, fmt);
  69   1        
  70   1          if ((dbgLevel & FmDebug) == dbgLevel)
  71   1          {
  72   2              vprintf(fmt, args);
  73   2          }
  74   1        
  75   1          va_end(args);
  76   1          IRQ_ENABLE_INTERRUPT();
  77   1      }
  78          
  79          /******************************************************************************
  80           * @fn      FM_HexDump
  81           *
  82           * @brief   Dumps a byte stream
  83           *
  84           * @param   dbgLevel - debug level(Module number, check fm.h for enums)
  85           *          title - user string to be displayed(it should not contain format specifiers)
  86           *          buf - pointer reference to byte stream
  87           *          len - length
  88           *
  89           * @return  none
  90           */
  91          
  92          void FM_HexDump(u32 dbgLevel, const char *title, const unsigned char *buf, int len)
  93          {
  94   1          int i, j;
  95   1          unsigned char *offset;
  96   1      
C51 COMPILER V9.53.0.0   FM                                                                11/04/2015 20:09:39 PAGE 3   

  97   1          if ((dbgLevel & FmDebug) != dbgLevel)
  98   1              return;
  99   1      
 100   1          offset = (unsigned char *) buf;
 101   1          IRQ_DISABLE_INTERRUPT();
 102   1          printf("%s:\n", title);
 103   1      
 104   1          for (i = 0; i < len / 16; i++) {
 105   2              for (j = 0; j < 16; j++)
 106   2      #ifdef P8051
 107   2                  printf("%02bx  ", offset[j]);
 108   2      #else
                          printf("%02x  ", offset[j]);
              #endif
 111   2              printf("\n");
 112   2              offset += 16;
 113   2          }
 114   1          i = len % 16;
 115   1          for (j = 0; j < i; j++)
 116   1      #ifdef P8051
 117   1              printf("%02bx  ", offset[j]);
 118   1      #else
                      printf("%02x  ", offset[j]);
              #endif
 121   1          printf("\n");
 122   1          IRQ_ENABLE_INTERRUPT();
 123   1      }
 124          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    408    ----
   CONSTANT SIZE    =     15    ----
   XDATA SIZE       =      4      69
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
