C51 COMPILER V9.53.0.0   GV701X_GPIODRIVER                                                 11/04/2015 20:09:44 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE GV701X_GPIODRIVER
OBJECT MODULE PLACED IN .\obj\gv701x_gpiodriver.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\..\..\components\drivers\gpio\src\gv701x_gpiodriver.c LARGE OBJECT
                    -ADVANCED OPTIMIZE(9,SPEED) BROWSE INTVECTOR(0X2100) INCDIR(..\..\..\..\firmware\common\datapath;..\..\..\..\firmware\com
                    -mon\include;..\..\..\..\firmware\hal;..\..\..\..\firmware\hpgp\src\crypto;..\..\..\..\firmware\hpgp\src\ctrl;..\..\..\..
                    -\firmware\hpgp\src\hal;..\..\..\..\firmware\hpgp\src\link;..\..\..\..\firmware\hpgp\src\mux;..\..\..\..\firmware\hpgp\sr
                    -c\nma;..\..\..\..\firmware\hpgp\src\route;..\..\..\..\firmware\hpgp\src\test;..\..\..\..\firmware\project\hal\src;..\..\
                    -..\..\firmware\zigbee;..\..\..\..\components\aps\inc;..\..\..\..\components\utilities\datatype\inc;..\..\..\..\component
                    -s\utilities\event\inc;..\..\..\..\components\utilities\linklist\inc;..\..\..\..\components\utilities\timer\inc;..\..\..\
                    -..\components\hpgp\inc;..\..\..\..\firmware\common;..\..\..\..\firmware\hpgp;..\..\..\..\firmware\hpgp\src;..\..\..\..\f
                    -irmware\app_support;..\..\..\..\firmware\HybriiB_configuration_rw\src;..\..\..\..\components\drivers\gpio\inc;..\..\..\.
                    -.\components\drivers\hpgp\inc;..\..\..\..\components\drivers\nwk\inc;..\..\..\..\components\drivers\ieee802154\inc;..\..
                    -\..\..\components;..\..\..\..\components\osal\inc;..\..\..\..\components\nma\hpgp\inc;..\..\..\..\components\nma\ieee802
                    -154\inc;..\..\..\..\components\nma;..\..\..\..\components\utilities\event\inc;..\..\..\..\components\hpgp\inc;..\..\..\.
                    -.\components\drivers\flash\inc;..\..\..\..\components\ieee802154\inc;..\..\..\..\components\drivers\uart\inc;..\..\..\..
                    -\components\utilities;..\..\..\..\components\drivers\hpgp\inc;..\..\..\..\components\drivers\ieee802154\inc;..\..\..\..\
                    -components\drivers\nwk\inc;..\..\..\..\components\utilities\debug\inc;..\..\..\..\sampleapp\inc;..\..\..\..\sampleapp\sr
                    -c;..\..\inc;..\..\..\..\components\drivers\i2c\inc;..\..\..\..\components\drivers\gvspi\inc) NOAREGS DEFINE(inline,P8051
                    -,C51,HPGP_HAL,HYBRII_8051,HYBRII_HPGP,CCO_FUNC,STA_FUNC,HPGP_TEST,HPGP_DEBUG,RTX51_TINY_OS,HYBRII_ASIC,PLC_SW_SYNC,HPGP_
                    -MAC_SAP,NMA,NEW_SYNC,UM,HYBRII_B,Hybrii_B,HW_SPI_TX_CRC,HW_SPI_RX_CRC,B_ASICPLC,HYBRII_ASIC_A2,BB_CAL,_CRC_VERIFY_,BB_GA
                    -IN_TABLE,B2,FREQ_DETECT,HYBRII_B_AFE,_BC_SECURE_TEST_,FREQ_DETECT,BCN_ERR,NO_HOST,MCCO,KEEP_ALIVE,UART_RAW,UART_HOST_INT
                    -F,UART_GPIO_INTERRUPT,MCCO,SW_RECOVERY,HYBRII_802154,DEBUG_DATAPATH,HPGP_DRIVER_APP,LRWPAN_DRIVER_APP,NWKSTARTUP_APP,ROU
                    -TE_APP,RTOPO_APP,REGISTER_APP,LLP_APP,BRIDGE,DEVICEINTF_APP,SMARTLIGHT_APP,LED_SMART_LIGHT,ROUTE_RECOVERY) PRINT(.\lst\g
                    -v701x_gpiodriver.lst) TABS(2) OBJECT(.\obj\gv701x_gpiodriver.obj)

line level    source

   1          /** =======================================================
   2           * @file gv701x_gpiodriver.c
   3           * 
   4           * @brief Contains gpio read/write apis implementation
   5           *
   6           *  Copyright (C) 2010-2015, Greenvity Communications, Inc.
   7           *  All Rights Reserved
   8           *  
   9           * ========================================================*/
  10          
  11          #include "papdef.h"
  12          #include "gv701x_gpiodriver.h"
  13          
  14          /******************************************************************************
  15           * @fn      GV701x_GPIO_Config
  16           *
  17           * @brief   Configures mode of the GPIO          
  18           *
  19           * @param   mode - (WRITE_ONLY or READ_ONLY) (as defined in gv701x_gpiodriver.h)
  20           *      gpio - the bitmap of the GPIO
  21           *
  22           * @return  none
  23           */
  24           
  25          void GV701x_GPIO_Config(u8 mode, u32 gpio)
  26          {
  27   1        u32 gpioReg;
  28   1        
  29   1        gpioReg = hal_common_reg_32_read(CPU_GPIO_REG);
  30   1        if(mode == WRITE_ONLY)
  31   1        {
  32   2          gpioReg &= ~gpio; 
  33   2        }
  34   1        else if(mode == READ_ONLY)
C51 COMPILER V9.53.0.0   GV701X_GPIODRIVER                                                 11/04/2015 20:09:44 PAGE 2   

  35   1        {
  36   2          gpioReg |= gpio;
  37   2        }
  38   1        else 
  39   1          return;
  40   1        
  41   1        hal_common_reg_32_write(CPU_GPIO_REG,gpioReg);
  42   1      }
  43          
  44          /******************************************************************************
  45           * @fn      GV701x_GPIO_Write
  46           *
  47           * @brief   Sets/Clears the GPIO
  48           *
  49           * @param   gpio - the bitmap of the GPIO
  50           *      value - value to be written
  51           *
  52           * @return  none
  53           */
  54          void GV701x_GPIO_Write(u32 gpio,u8 value)
  55          {
  56   1        u32 gpioReg;
  57   1        
  58   1        gpioReg = hal_common_reg_32_read(CPU_GPIO_REG); 
  59   1        if(value)
  60   1        {
  61   2          gpioReg |= gpio;
  62   2        }
  63   1        else
  64   1        {
  65   2          gpioReg &= ~gpio;
  66   2        }
  67   1        hal_common_reg_32_write(CPU_GPIO_REG,gpioReg);
  68   1      }
  69          
  70          /******************************************************************************
  71           * @fn      GV701x_GPIO_Read
  72           *
  73           * @brief   Reads the GPIO
  74           *
  75           * @param   gpio - the bitmap of the GPIO
  76           *
  77           * @return  GPIO value
  78           */
  79          u8 GV701x_GPIO_Read(u32 gpio)
  80          {
  81   1        u32 gpioReg;
  82   1        
  83   1        gpioReg = hal_common_reg_32_read(CPU_GPIO_REG);
  84   1        if(gpioReg & gpio)
  85   1        {
  86   2          return true;
  87   2        }
  88   1        else
  89   1        { 
  90   2          return false;
  91   2        } 
  92   1      }
  93          
  94          /******************************************************************************
  95           * @fn      GV701x_Chip_Reset
  96           *
C51 COMPILER V9.53.0.0   GV701X_GPIODRIVER                                                 11/04/2015 20:09:44 PAGE 3   

  97           * @brief   Soft reset's the GV chip
  98           *
  99           * @param   none
 100           *
 101           * @return  none
 102           */
 103          void GV701x_Chip_Reset(void)
 104          {
 105   1        GV701x_GPIO_Config(WRITE_ONLY, CPU_GPIO_IO_PIN0);
 106   1        GV701x_GPIO_Write(CPU_GPIO_WR_PIN0,1);
 107   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    419    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----      26
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
