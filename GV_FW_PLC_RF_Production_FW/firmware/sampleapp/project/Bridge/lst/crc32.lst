C51 COMPILER V9.53.0.0   CRC32                                                             11/04/2015 20:09:42 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE CRC32
OBJECT MODULE PLACED IN .\obj\crc32.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\..\..\firmware\hpgp\src\crypto\crc32.c LARGE OBJECTADVANCED OPTIMI
                    -ZE(9,SIZE) BROWSE INTVECTOR(0X2100) INCDIR(..\..\..\..\firmware\common\datapath;..\..\..\..\firmware\common\include;..\.
                    -.\..\..\firmware\hal;..\..\..\..\firmware\hpgp\src\crypto;..\..\..\..\firmware\hpgp\src\ctrl;..\..\..\..\firmware\hpgp\s
                    -rc\hal;..\..\..\..\firmware\hpgp\src\link;..\..\..\..\firmware\hpgp\src\mux;..\..\..\..\firmware\hpgp\src\nma;..\..\..\.
                    -.\firmware\hpgp\src\route;..\..\..\..\firmware\hpgp\src\test;..\..\..\..\firmware\project\hal\src;..\..\..\..\firmware\z
                    -igbee;..\..\..\..\components\aps\inc;..\..\..\..\components\utilities\datatype\inc;..\..\..\..\components\utilities\even
                    -t\inc;..\..\..\..\components\utilities\linklist\inc;..\..\..\..\components\utilities\timer\inc;..\..\..\..\components\hp
                    -gp\inc;..\..\..\..\firmware\common;..\..\..\..\firmware\hpgp;..\..\..\..\firmware\hpgp\src;..\..\..\..\firmware\app_supp
                    -ort;..\..\..\..\firmware\HybriiB_configuration_rw\src;..\..\..\..\components\drivers\gpio\inc;..\..\..\..\components\dri
                    -vers\hpgp\inc;..\..\..\..\components\drivers\nwk\inc;..\..\..\..\components\drivers\ieee802154\inc;..\..\..\..\component
                    -s;..\..\..\..\components\osal\inc;..\..\..\..\components\nma\hpgp\inc;..\..\..\..\components\nma\ieee802154\inc;..\..\..
                    -\..\components\nma;..\..\..\..\components\utilities\event\inc;..\..\..\..\components\hpgp\inc;..\..\..\..\components\dri
                    -vers\flash\inc;..\..\..\..\components\ieee802154\inc;..\..\..\..\components\drivers\uart\inc;..\..\..\..\components\util
                    -ities;..\..\..\..\components\drivers\hpgp\inc;..\..\..\..\components\drivers\ieee802154\inc;..\..\..\..\components\drive
                    -rs\nwk\inc;..\..\..\..\components\utilities\debug\inc;..\..\..\..\sampleapp\inc;..\..\..\..\sampleapp\src;..\..\inc;..\.
                    -.\..\..\components\drivers\i2c\inc;..\..\..\..\components\drivers\gvspi\inc) NOAREGS DEFINE(inline,P8051,C51,HPGP_HAL,HY
                    -BRII_8051,HYBRII_HPGP,CCO_FUNC,STA_FUNC,HPGP_TEST,HPGP_DEBUG,RTX51_TINY_OS,HYBRII_ASIC,PLC_SW_SYNC,HPGP_MAC_SAP,NMA,NEW_
                    -SYNC,UM,HYBRII_B,Hybrii_B,HW_SPI_TX_CRC,HW_SPI_RX_CRC,B_ASICPLC,HYBRII_ASIC_A2,BB_CAL,_CRC_VERIFY_,BB_GAIN_TABLE,B2,FREQ
                    -_DETECT,HYBRII_B_AFE,_BC_SECURE_TEST_,FREQ_DETECT,BCN_ERR,NO_HOST,MCCO,KEEP_ALIVE,UART_RAW,UART_HOST_INTF,UART_GPIO_INTE
                    -RRUPT,MCCO,SW_RECOVERY,HYBRII_802154,DEBUG_DATAPATH,HPGP_DRIVER_APP,LRWPAN_DRIVER_APP,NWKSTARTUP_APP,ROUTE_APP,RTOPO_APP
                    -,REGISTER_APP,LLP_APP,BRIDGE,DEVICEINTF_APP,SMARTLIGHT_APP,LED_SMART_LIGHT,ROUTE_RECOVERY) PRINT(.\lst\crc32.lst) TABS(2
                    -) OBJECT(.\obj\crc32.obj)

line level    source

   1          #include "papdef.h"
   2          
   3          /* crc_tab[] -- this crcTable is being build by chksum_crc32GenTab().
   4           *              so make sure, you call it before using the other
   5           *              functions!
   6           */
   7          static uint32_t crc_tab[256];
   8          
   9          /* chksum_crc() -- to a given block, this one calculates the
  10           *                              crc32-checksum until the length is
  11           *                              reached. the crc32-checksum will be
  12           *                              the result.
  13           */
  14          uint32_t chksum_crc32 (unsigned char *block, unsigned int length)
  15          {
  16   1         register unsigned long crc;
  17   1         unsigned long i;
  18   1      
  19   1         crc = 0xFFFFFFFF;
  20   1         for (i = 0; i < length; i++)
  21   1         {
  22   2            crc = ((crc >> 8) & 0x00FFFFFF) ^ crc_tab[(crc ^ *block++) & 0xFF];
  23   2         }
  24   1         return (crc ^ 0xFFFFFFFF);
  25   1      }
  26          
  27          /* chksum_crc32gentab() --      to a global crc_tab[256], this one will
  28           *                              calculate the crcTable for crc32-checksums.
  29           *                              it is generated to the polynom [..]
  30           */
  31          
  32          void chksum_crc32gentab ()
  33          {
  34   1         unsigned long crc, poly;
C51 COMPILER V9.53.0.0   CRC32                                                             11/04/2015 20:09:42 PAGE 2   

  35   1         int i, j;
  36   1      
  37   1         poly = 0xEDB88320L;
  38   1         for (i = 0; i < 256; i++)
  39   1         {
  40   2            crc = i;
  41   2            for (j = 8; j > 0; j--)
  42   2            {
  43   3               if (crc & 1)
  44   3               {
  45   4                  crc = (crc >> 1) ^ poly;
  46   4               }
  47   3               else
  48   3               {
  49   4                  crc >>= 1;
  50   4               }
  51   3            }
  52   2            crc_tab[i] = crc;
  53   2         }
  54   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    391    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   1024      25
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
