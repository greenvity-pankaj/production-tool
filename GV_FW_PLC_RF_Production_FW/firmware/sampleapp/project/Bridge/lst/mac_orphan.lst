C51 COMPILER V9.53.0.0   MAC_ORPHAN                                                        11/04/2015 20:09:51 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE MAC_ORPHAN
OBJECT MODULE PLACED IN .\obj\mac_orphan.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\..\..\firmware\zigbee\mac_orphan.c LARGE OBJECTADVANCED OPTIMIZE(9
                    -,SIZE) BROWSE INTVECTOR(0X2100) INCDIR(..\..\..\..\firmware\common\datapath;..\..\..\..\firmware\common\include;..\..\..
                    -\..\firmware\hal;..\..\..\..\firmware\hpgp\src\crypto;..\..\..\..\firmware\hpgp\src\ctrl;..\..\..\..\firmware\hpgp\src\h
                    -al;..\..\..\..\firmware\hpgp\src\link;..\..\..\..\firmware\hpgp\src\mux;..\..\..\..\firmware\hpgp\src\nma;..\..\..\..\fi
                    -rmware\hpgp\src\route;..\..\..\..\firmware\hpgp\src\test;..\..\..\..\firmware\project\hal\src;..\..\..\..\firmware\zigbe
                    -e;..\..\..\..\components\aps\inc;..\..\..\..\components\utilities\datatype\inc;..\..\..\..\components\utilities\event\in
                    -c;..\..\..\..\components\utilities\linklist\inc;..\..\..\..\components\utilities\timer\inc;..\..\..\..\components\hpgp\i
                    -nc;..\..\..\..\firmware\common;..\..\..\..\firmware\hpgp;..\..\..\..\firmware\hpgp\src;..\..\..\..\firmware\app_support;
                    -..\..\..\..\firmware\HybriiB_configuration_rw\src;..\..\..\..\components\drivers\gpio\inc;..\..\..\..\components\drivers
                    -\hpgp\inc;..\..\..\..\components\drivers\nwk\inc;..\..\..\..\components\drivers\ieee802154\inc;..\..\..\..\components;..
                    -\..\..\..\components\osal\inc;..\..\..\..\components\nma\hpgp\inc;..\..\..\..\components\nma\ieee802154\inc;..\..\..\..\
                    -components\nma;..\..\..\..\components\utilities\event\inc;..\..\..\..\components\hpgp\inc;..\..\..\..\components\drivers
                    -\flash\inc;..\..\..\..\components\ieee802154\inc;..\..\..\..\components\drivers\uart\inc;..\..\..\..\components\utilitie
                    -s;..\..\..\..\components\drivers\hpgp\inc;..\..\..\..\components\drivers\ieee802154\inc;..\..\..\..\components\drivers\n
                    -wk\inc;..\..\..\..\components\utilities\debug\inc;..\..\..\..\sampleapp\inc;..\..\..\..\sampleapp\src;..\..\inc;..\..\..
                    -\..\components\drivers\i2c\inc;..\..\..\..\components\drivers\gvspi\inc) NOAREGS DEFINE(inline,P8051,C51,HPGP_HAL,HYBRII
                    -_8051,HYBRII_HPGP,CCO_FUNC,STA_FUNC,HPGP_TEST,HPGP_DEBUG,RTX51_TINY_OS,HYBRII_ASIC,PLC_SW_SYNC,HPGP_MAC_SAP,NMA,NEW_SYNC
                    -,UM,HYBRII_B,Hybrii_B,HW_SPI_TX_CRC,HW_SPI_RX_CRC,B_ASICPLC,HYBRII_ASIC_A2,BB_CAL,_CRC_VERIFY_,BB_GAIN_TABLE,B2,FREQ_DET
                    -ECT,HYBRII_B_AFE,_BC_SECURE_TEST_,FREQ_DETECT,BCN_ERR,NO_HOST,MCCO,KEEP_ALIVE,UART_RAW,UART_HOST_INTF,UART_GPIO_INTERRUP
                    -T,MCCO,SW_RECOVERY,HYBRII_802154,DEBUG_DATAPATH,HPGP_DRIVER_APP,LRWPAN_DRIVER_APP,NWKSTARTUP_APP,ROUTE_APP,RTOPO_APP,REG
                    -ISTER_APP,LLP_APP,BRIDGE,DEVICEINTF_APP,SMARTLIGHT_APP,LED_SMART_LIGHT,ROUTE_RECOVERY) PRINT(.\lst\mac_orphan.lst) TABS(
                    -2) OBJECT(.\obj\mac_orphan.obj)

line level    source

   1          /**
   2           * @file mac_orphan.c
   3           *
   4           * Implements orphan scan related functionalities on coordinator side.
   5           *
   6           * $Id: mac_orphan.c,v 1.3 2014/11/26 13:19:41 ranjan Exp $
   7           *
   8           * Copyright (c) 2011, Greenvity Communication All rights reserved.
   9           *
  10           */
  11          #ifdef HYBRII_802154
  12          
  13          /* === Includes ============================================================ */
  14          
  15          #include <string.h>
  16          #include "papdef.h"
  17          #include "timer.h"
  18          #include "return_val.h"
  19          #include "bmm.h"
  20          #include "qmm.h"
  21          #include "mac_msgs.h"
  22          #include "mac_hal.h"
  23          #include "mac_const.h"
  24          #include "mac_api.h"
  25          #include "mac_data_structures.h"
  26          #include "mac_internal.h"
  27          #include "mac.h"
  28          #include "utils_fw.h"
  29          
  30          /* === Macros  ============================================================= */
  31          
  32          
  33          /* === Globals ============================================================= */
  34          
C51 COMPILER V9.53.0.0   MAC_ORPHAN                                                        11/04/2015 20:09:51 PAGE 2   

  35          
  36          /* === Prototypes ========================================================== */
  37          
  38          
  39          /* === Implementation ====================================================== */
  40          
  41          /**
  42           *
  43           * This function processes an incoming orphan notification command.
  44           * A PAN coordinator gets to this function through a TAL data indication
  45           * message.
  46           *
  47           * buf_p - Pointer to reception buffer
  48           */
  49          void mac_process_orphan_notification (buffer_t *buf_p)
  50          {
  51   1          mlme_orphan_ind_t *moi_p = (mlme_orphan_ind_t *)BMM_BUFFER_POINTER(buf_p);
  52   1      
  53   1          moi_p->cmdcode = MLME_ORPHAN_INDICATION;
  54   1          ADDR_COPY_DST_SRC_64(moi_p->OrphanAddress,
  55   1                               mac_parse_data.src_addr.long_address);
  56   1      
  57   1          /* Append the MLME orphan indication message to MAC-NHLE queue */
  58   1      #if (defined UM) && (!defined ZBMAC_DIAG)
  59   1        mlme_send_to_host(buf_p);
  60   1      #else
                mlme_orphan_ind(buf_p);
              #endif  
  63   1      }
  64          
  65          
  66          /**
  67           *
  68           * The MLME-ORPHAN.response primitive allows the next higher layer
  69           * of a coordinator to respond to the MLME-ORPHAN.indication primitive.
  70           * The MLME-ORPHAN.response primitive is generated by the next higher
  71           * layer and issued to its MLME when it reaches a decision about whether
  72           * the orphaned device indicated in the MLME-ORPHAN.indication primitive
  73           * is associated.
  74           *
  75           *  buf_p - Pointer to the message buffer.
  76           */
  77          void mlme_orphan_response (buffer_t *buf_p)
  78          {
  79   1          bool tx_status;
  80   1      
  81   1          tx_status = mac_tx_coord_realignment_command(ORPHANREALIGNMENT,
  82   1                                                       buf_p,
  83   1                                                       hal_pib_PANId,
  84   1                                                       hal_pib_CurrentChannel,
  85   1                                                       hal_pib_CurrentPage);
  86   1      
  87   1          if (tx_status == FALSE) {
  88   2              mac_mlme_comm_status(MAC_CHANNEL_ACCESS_FAILURE, buf_p);
  89   2          }
  90   1      }
  91          
  92          #endif //HYBRII_802154


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    121    ----
C51 COMPILER V9.53.0.0   MAC_ORPHAN                                                        11/04/2015 20:09:51 PAGE 3   

   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       9
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
